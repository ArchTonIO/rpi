include Settings.mk
#ARMGNU ?= arm-none-eabi
#ARMGNU = arm-linux-gnueabihf
#ARMGNU = aarch64-linux-gnu
COPS = -Wall -nostdlib -nostartfiles -ffreestanding -I. 
#ASMOPS = -Iinclude 

#BUILD_DIR = build
#SRC_DIR = src

CR_OBJS = basal.o delays.o interrupts.o gpio.o lfb.o font.psf.o font.sfn.o \
	  mbox.o memory.o mini_uart.o \
	  string.o uart0.o vectors.o

CR_LIB = libcrunky.a

all : $(CR_OBJS) $(CR_LIB)


$(CR_LIB) : $(CR_OBJS)
	ar -crs $@ $^

vectors.o : vectors.s
	$(ARMGNU)-as vectors.s -o vectors.o

%.o : %.c
	$(ARMGNU)-gcc $(COPS) -c $^ -o $@

clean :
	rm -rf *.img *.o *.a

